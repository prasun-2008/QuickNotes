<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login - NEB Notes | Secure Access to Your Study Resources</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
          },
          fontFamily: {
            sans: ['Poppins', 'ui-sans-serif', 'system-ui', 'sans-serif'],
          },
          keyframes: {
            pulseGlow: {
              '0%, 100%': { boxShadow: '0 0 8px #2563eb' },
              '50%': { boxShadow: '0 0 20px #2563eb' },
            },
          },
          animation: {
            pulseGlow: 'pulseGlow 2.5s ease-in-out infinite',
          },
        },
      },
    };
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-700 via-blue-600 to-indigo-700 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex flex-col font-sans"> <header class="sticky top-0 z-50 bg-white/30 dark:bg-gray-900/30 backdrop-blur-md shadow-md">
  <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="/" class="text-2xl font-extrabold text-primary dark:text-blue-400 tracking-tight select-none">NEB Notes</a>

    <div class="flex items-center gap-4">
      <button
              id="theme-toggle"
              aria-label="Toggle dark/light theme"
              class="text-white focus:outline-none focus:ring-2 focus:ring-primary rounded p-1"
      >
        <svg
                id="sun-icon"
                class="w-6 h-6 hidden dark:block"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h1M2 12h1m15.364 6.364l-.707.707M6.343 6.343l-.707-.707m12.728 0l-.707-.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
        <svg
                id="moon-icon"
                class="w-6 h-6 dark:hidden"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
      </button>

      <button id="menu-toggle" class="md:hidden text-white" aria-label="Toggle menu">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <nav class="hidden md:flex items-center gap-8 text-lg font-semibold text-gray-100 drop-shadow-lg">
      <a href="/" class="hover:text-blue-300 dark:hover:text-blue-300 transition">Home</a>
      <a href="/about" class="hover:text-blue-300 dark:hover:text-blue-300 transition">About</a>
      <a href="/notes" class="hover:text-blue-300 dark:hover:text-blue-300 transition">Notes</a>
      <a href="/login" class="px-4 py-2 border border-white/75 text-white rounded hover:bg-white hover:text-primary transition">Login</a>
      <a href="/register" class="px-4 py-2 bg-primary text-white rounded hover:bg-blue-700 transition">Register</a>
    </nav>
  </div>
  <nav id="mobile-menu" class="md:hidden hidden flex-col gap-3 px-6 pb-6 text-gray-100 text-lg font-semibold bg-gradient-to-b from-blue-900 to-indigo-900 dark:from-gray-800 dark:to-gray-900">
    <a href="/" class="block py-2 hover:text-blue-300 dark:hover:text-blue-300">Home</a>
    <a href="/about" class="block py-2 hover:text-blue-300 dark:hover:text-blue-300">About</a>
    <a href="/notes" class="block py-2 hover:text-blue-300 dark:hover:text-blue-300">Notes</a>
    <a href="/login" class="block py-2 border border-white/75 rounded hover:bg-white hover:text-primary transition">Login</a>
    <a href="/register" class="block py-2 bg-primary text-white rounded hover:bg-blue-700 transition">Register</a>
  </nav>
</header>

<main role="main" aria-labelledby="login-header" class="flex-grow flex items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
  <section class="relative w-full sm:max-w-md md:max-w-lg lg:max-w-xl bg-white/20 dark:bg-gray-900/70 backdrop-blur-lg rounded-3xl border border-white/25 dark:border-gray-700 shadow-2xl px-6 sm:px-10 py-10 sm:py-12 flex flex-col overflow-hidden">
    <div aria-hidden="true" class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-gradient-to-tr from-primary/80 to-indigo-500 rounded-full blur-3xl opacity-70 animate-pulseGlow z-0"></div>
    <div aria-hidden="true" class="absolute bottom-0 right-1/2 transform translate-x-1/2 translate-y-1/2 w-52 h-52 bg-gradient-to-br from-indigo-400 to-primary/70 rounded-full blur-3xl opacity-60 animate-pulseGlow z-0"></div>

    <h1 id="login-header" class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-white mb-4 text-center drop-shadow-lg z-10">Welcome Back</h1>
    <p class="text-white/80 mb-8 text-center text-base sm:text-lg font-semibold z-10">Log in to NEB Notes and continue your study journey</p>

    <form action="/login" method="POST" class="space-y-8 sm:space-y-10 z-10" novalidate>
      <div class="relative z-10">
        <input type="email" id="email" name="username" autocomplete="email" required placeholder=" "
               class="peer block w-full appearance-none bg-transparent border-b-4 border-white/40 text-white text-lg sm:text-xl py-3 px-0 rounded-sm focus:outline-none focus:border-primary transition duration-300" />
        <label for="email"
               class="absolute left-0 top-3 text-white/80 text-base sm:text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-focus:top-0 peer-focus:text-sm peer-focus:text-primary select-none">Email
          Address</label>
      </div>

      <!-- 🛡️ CSRF protection -->
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />



      <div class="relative z-10">
        <input type="password" id="password" name="password" autocomplete="current-password" required placeholder=" "
               class="peer block w-full appearance-none bg-transparent border-b-4 border-white/40 text-white text-lg sm:text-xl py-3 px-0 rounded-sm focus:outline-none focus:border-primary transition duration-300" />
        <label for="password"
               class="absolute left-0 top-3 text-white/80 text-base sm:text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-focus:top-0 peer-focus:text-sm peer-focus:text-primary select-none">Password</label>
      </div>

      <button type="submit"
              class="w-full bg-primary hover:bg-blue-700 focus:bg-blue-700 text-white font-extrabold text-lg sm:text-xl py-3 sm:py-4 rounded-2xl shadow-lg transition focus:outline-none focus:ring-4 focus:ring-primary/70"
              aria-label="Log in to your NEB Notes account">
        Log In
      </button>
    </form>

    <p class="mt-8 text-center text-white/80 text-base sm:text-lg font-medium">
      Don’t have an account?
      <a href="/register" class="text-primary hover:text-blue-300 font-semibold focus:underline">Register here</a>
    </p>
  </section>
</main>

<script>
  const htmlElement = document.documentElement;
  const themeToggle = document.getElementById('theme-toggle');
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');

  // Initialize theme based on localStorage or default to dark
  const currentTheme = localStorage.getItem('theme');
  if (currentTheme === 'light') {
    htmlElement.classList.remove('dark');
  } else {
    // Default to dark if no theme is saved or if it's 'dark'
    htmlElement.classList.add('dark');
  }

  // Theme toggle functionality
  themeToggle.addEventListener('click', () => {
    if (htmlElement.classList.contains('dark')) {
      htmlElement.classList.remove('dark');
      localStorage.setItem('theme', 'light');
    } else {
      htmlElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
    }
  });

  // Mobile menu toggle functionality
  menuToggle.addEventListener('click', () => {
    const isHidden = mobileMenu.classList.toggle('hidden');
    menuToggle.setAttribute('aria-expanded', String(!isHidden));
  });
</script>
</body>
</html>
